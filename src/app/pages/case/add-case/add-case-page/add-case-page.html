<app-page-header-component title="ุฅุถุงูุฉ ูุถูุฉ ุฌุฏูุฏุฉ"
    description="ุฃุฏุฎู ุจูุงูุงุช ุงููุถูุฉ ูุงูุนููู"></app-page-header-component>
<h1>{{addcaseForm.value| json}}</h1>

<section class="section">
    <h3>ุงูุจุญุซ ุนู ุงูุนููู</h3>
    <div class="search-box">
        <form #searchForm="ngForm" (ngSubmit)="search(natId)">
            <div class="field-row">
                <div class="field flex">
                    <label for="natId">ุฑูู ุงููููุฉ</label>
                    <input type="text" name="natid" [(ngModel)]="natId" #natIdModel="ngModel" required
                        pattern="^\d{10}$" placeholder="ุฃุฏุฎู ุฑูู ุงููููุฉ ููุจุญุซ" />
                </div>
                <input type="submit" value="ุจุญุซ" class="mybtn bg-main searchbtn" [disabled]="searchForm.invalid" />
            </div>
            <p class="text-danger" *ngIf="natIdModel.touched && natIdModel.errors?.['required']">ูุฌุจ ุฅุฏุฎุงู ุฑูู ุงููููุฉ
            </p>
            <p *ngIf="natIdModel.touched && natIdModel.errors?.['pattern']" class="text-danger">ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู
                ูู 10 ุฎุงูุงุช</p>

        </form>
        @if (clients.length > 0) {
        <div class="parties-container" *ngIf="clients.length > 0">
            <p>ุฃุทุฑุงู ุงููุถูุฉ ุงููุฎุชุงุฑุฉ:</p>
            <div>
                @for(client of clients; track client.natId) {
                <div class="parties mybtn client-id  myrow">
                    <p class="flex">ุฑูู ุงููููุฉ: {{client.natId}}</p>
                    <a (click)="deleteClient(client.natId)"><i class="fa-solid fa-xmark"></i></a>
                </div>
                }
            </div>
        </div>
        }
        <p class="txt">๐ก ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุนูููุ ุณุชูุชุญ ูุงูุฐุฉ ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</p>
    </div>
</section>
<form [formGroup]="addcaseForm">
    <section formGroupName="caseForm" class="section">
        <h3>ุจูุงูุงุช ุงููุถูุฉ</h3>
        <div class="fields">
            <div class="field">
                <label for="subject">ููุถูุน ุงููุถูุฉ</label>
                <input type="text" formControlName="subject" placeholder="ุฃุฏุฎู ููุถูุน ุงููุถูุฉ" />
                <div class="text-danger" *ngIf="subject?.touched">
                    <p *ngIf="subject?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="subject?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุนูู ุงูุฃูู 3 ุฃุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="PartiesToTheCase">ุงุทุฑุงู ุงูุฏุนูู</label>
                <select formControlName="PartiesToTheCase">
                    <option value="">ุงุฎุชุฑ</option>
                    <option value="ูุฏุนู">ูุฏุนู</option>
                    <option value="ูุฏุนู ุนููู">ูุฏุนู ุนููู</option>
                </select>
                <div class="text-danger" *ngIf="PartiesToTheCase?.invalid && PartiesToTheCase?.touched">
                    <p>ูุฑุฌู ุงุฎุชูุงุฑ ุทุฑู ุงูุฏุนูู</p>
                </div>
            </div>
            <div class="field">
                <label for="estimatedtime">ุงูููุช ุงููุชููุน ููุฏุฑุงุณุฉ</label>
                <input type="date" formControlName="estimatedtime" />
                <div class="text-danger" *ngIf="estimatedtime?.invalid && estimatedtime?.touched">
                    <p>ูุฑุฌู ุชุญุฏูุฏ ุงูุชุงุฑูุฎ</p>
                </div>
            </div>
            <div class="field">
                <label for="courttype">ููุน ุงููุญููุฉ</label>
                <select formControlName="courttype">
                    <option value="">ุงุฎุชุฑ</option>
                    <option value="ุนุงูุฉ">ุนุงูุฉ</option>
                    <option value="ุฌูุงุฆูุฉ">ุฌูุงุฆูุฉ</option>
                </select>
                <div class="text-danger" *ngIf="courttype?.invalid && courttype?.touched">
                    <p>ูุฑุฌู ุงุฎุชูุงุฑ ููุน ุงููุญููุฉ</p>
                </div>
            </div>
            <div class="field">
                <label for="AssignedOfficer">ุงูููุธู ุงููููู ุนูู ุงููุถูุฉ</label>
                <select formControlName="AssignedOfficer">
                    <option value="">ุงุฎุชุฑ</option>
                    <option value="ุนุจุฏุงูุนุฒูุฒ">ุนุจุฏุงูุนุฒูุฒ</option>
                    <option value="ุญุณู">ุญุณู</option>
                </select>
                <div class="text-danger" *ngIf="AssignedOfficer?.invalid && AssignedOfficer?.touched">
                    <p>ูุฑุฌู ุงุฎุชูุงุฑ ุงูููุธู</p>
                </div>
            </div>
            <div class="field">
                <label for="caseNumber">ุฑูู ุงููุถูุฉ</label>
                <input type="text" formControlName="caseNumber" placeholder="ุฃุฏุฎู ุฑูู ุงููุถูุฉ" />
            </div>
            <div class="field lawyer-opnion">
                <label for="lawyerOpinion">ุฑุฃู ุงููุญุงูู</label>
                <textarea formControlName="lawyerOpinion" placeholder="ุฑุฃู ุงููุญุงูู"></textarea>
                <div class="text-danger" *ngIf="lawyerOpinion?.invalid && lawyerOpinion?.touched">
                    <p *ngIf="lawyerOpinion?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="lawyerOpinion?.errors?.['minlength']">ูุฌุจ ุฃู ูุญุชูู ุนูู 10 ุฃุญุฑู ุนูู ุงูุฃูู</p>
                </div>
            </div>
        </div>
    </section>
    <section formGroupName="contract" class="section">
        
        <label class="switch">
            <input type="checkbox">
            <span class="slider"></span>
        </label>
        <h3>
            ุฅุธูุงุฑ ูุณู ุงูุนูุฏ ุ
        </h3>
        <div class="fields">
            <div class="field">
                <label for="contractType">ููุน ุงูุนูุฏ</label>
                <select formControlName="contractType">
                    <option value="">ุงุฎุชุฑ</option>
                    <option value="1">ูุญุฏุฏ ุจูุฏุฉ</option>
                    <option value="2">ุบูุฑ ูุญุฏุฏ ุจูุฏุฉ</option>
                </select>

                <p class="text-danger" *ngIf="contractType?.invalid && contractType?.touched">ูุฑุฌู ุงุฎุชูุงุฑ ููุน ุงูุนูุฏ</p>

            </div>
            <div class="field">
                <label for="totalPrice">ุงูุณุนุฑ ุงูุงุฌูุงูู</label>
                <input type="number" min="0" formControlName="totalPrice" placeholder="ุงุฏุฎู ุงูุณุนุฑ" />
                <p *ngIf="totalPrice?.touched && totalPrice?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                <p *ngIf="totalPrice?.errors?.['min']">ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃูุจุฑ ูู ุฃู ูุณุงูู ุตูุฑ</p>
            </div>
            <div class="field" *ngIf="contractType?.value === '1'">
                <label for="issueDate">ุชุงุฑูุฎ ุงูุจุฏุงูุฉ</label>
                <input type="date" formControlName="issueDate" />
            </div>
            <div class="field" *ngIf="contractType?.value === '1'">
                <label for="expirationDate">ุชุงุฑูุฎ ุงูููุงูุฉ</label>
                <input type="date" formControlName="expirationDate" />
            </div>

            <div class="field">
                <label for="downAmount">ุงูุนุฑุจูู</label>
                <input type="number" formControlName="downAmount" placeholder="ุงุฏุฎู ููุฏู ุงูุนูุฏ" />
            </div>
            <div class="field">
                <label for="contractAttachment">ูุฑูู ุงูุนูุฏ</label>
                <input type="file" formControlName="contractAttachment" (change)="onFileSelected($event)" />
            </div>
            <div class="field">
                <p>
                    <input type="checkbox" formControlName="assigned" />
                    ุชู ุชูููุน ุงูุนูุฏ ุ
                </p>
            </div>
        </div>
    </section>
    <section formGroupName="poa" class="section">
        <h1>{{poa?.value | json}}</h1>
        <label class="switch">
            <input type="checkbox">
            <span class="slider"></span>
        </label>
        <h3>
            ุฅุธูุงุฑ ูุณู ุงูููุงูุฉ ุ
        </h3>
        <div *ngIf="!showPOA" class="fields">
            <div class="field">
                <label for="poaNumber">ุฃุฏุฎู ุฑูู ุงูููุงูุฉ</label>
                <input type="text" formControlName="poaNumber" placeholder="ุงุฏุฎู ุงูููุงูุฉ" />
                <div class="text-danger" *ngIf="poaNumber?.invalid && poaNumber?.touched">
                    <p *ngIf="poaNumber?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="poaNumber?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุงูุซุฑ ูู 3 ุงุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="poaissueDate">ุชุงุฑูุฎ ุฅุตุฏุงุฑ ุงูููุงูุฉ</label>
                <input type="date" formControlName="poaissueDate" />
                <div class="text-danger" *ngIf="poaissueDate?.invalid && poaissueDate?.touched">
                    <p *ngIf="poaissueDate?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                </div>
            </div>
            <div class="field">
                <label for="poaAuthrizedBy">ุงูุฌูุฉ ุงููุตุฏุฑุฉ ููููุงูุฉ</label>
                <input type="text" formControlName="poaAuthrizedBy" placeholder="ุฃุฏุฎู ุงูุฌูุฉ ุงููุตุฏุฑุฉ ููููุงูุฉ" />
                <div class="text-danger" *ngIf="poaAuthrizedBy?.invalid && poaAuthrizedBy?.touched">
                    <p *ngIf="poaAuthrizedBy?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="poaAuthrizedBy?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุงูุซุฑ ูู 3 ุงุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="poaAttachment">ูุฑูู ุงูููุงูุฉ</label>
                <input type="file" formControlName="poaAttachment" (change)="onFileSelected($event)" />
            </div>
        </div>
    </section>
    <div class="btns">
        <button type="submit" class="mybtn bg-main">ุฅุฑุณุงู ุงูููุงููุฉ</button>
        <button type="submit" class="mybtn bg-accent ">ุญูุธ ููุณูุฏุฉ</button>
    </div>
</form>