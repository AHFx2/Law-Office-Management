<app-page-header-component title="ุฅุถุงูุฉ ูุถูุฉ ุฌุฏูุฏุฉ"
    description="ุฃุฏุฎู ุจูุงูุงุช ุงููุถูุฉ ูุงูุนููู"></app-page-header-component>
<section class="section">
    <h3>ุงูุจุญุซ ุนู ุงูุนููู</h3>
    <div class="search-box">
        <form #searchForm="ngForm" (ngSubmit)="search(natId)">
            <div class="field-row">
                <div class="field flex">
                    <label for="natId">ุฑูู ุงููููุฉ</label>
                    <input type="text" name="natid" [(ngModel)]="natId" #natIdModel="ngModel" required maxlength="10"
                        pattern="^\d{10}$" placeholder="ุฃุฏุฎู ุฑูู ุงููููุฉ ููุจุญุซ" />
                </div>
                <input type="submit" value="ุจุญุซ" [disabled]="searchForm.invalid" [class.disabled]="searchForm.invalid"
                    class="mybtn bg-main searchbtn" />
            </div>
            <div *ngIf="natIdModel.touched || showErrors" class="errors text-danger">
                <p *ngIf="natIdModel.errors?.['required']">ูุฌุจ ุฅุฏุฎุงู ุฑูู ุงููููุฉ</p>
                <p *ngIf="natIdModel.errors?.['pattern']">ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู ูู 10 ุฎุงูุงุช</p>
            </div>
        </form>
        @if (existingClients.length > 0 || newClients.length > 0) {
        <div class="parties-container">
            <p>ุฃุทุฑุงู ุงููุถูุฉ ุงููุฎุชุงุฑุฉ:</p>
            <div>
                @for(client of existingClients; track client.natId) {
                <div class="parties mybtn client-id  myrow">
                    <p class="flex">ุฑูู ุงููููุฉ: {{client.natId}}</p>
                    <a class="btn-del" (click)="deleteExistingClient(client.natId)"><i class="fa-solid fa-xmark"></i></a>
                </div>
                }

                @for(client of newClients; track client.natId) {
                <div class="parties mybtn client-id  myrow">
                    <p class="flex">ุฑูู ุงููููุฉ: {{client.natId}}</p>
                    <a class="btn-del" (click)="deleteNewClient(client.natId)"><i class="fa-solid fa-xmark"></i></a>
                </div>
                }
            </div>
        </div>
        }
        <p class="txt">๐ก ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุนูููุ ุณุชูุชุญ ูุงูุฐุฉ ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</p>
    </div>
</section>
<form [formGroup]="addcaseForm">
    <section formGroupName="caseForm" class="section">
        <h3>ุจูุงูุงุช ุงููุถูุฉ</h3>
        <div class="fields">
            <div class="field">
                <label for="subject">ููุถูุน ุงููุถูุฉ</label>
                <input type="text" formControlName="subject" placeholder="ุฃุฏุฎู ููุถูุน ุงููุถูุฉ" />
                <div class="text-danger errors" *ngIf="subject?.touched || showErrors">
                    <p *ngIf="subject?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="subject?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุนูู ุงูุฃูู 3 ุฃุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="PartiesToTheCase">ุงุทุฑุงู ุงูุฏุนูู</label>
                <select formControlName="PartiesToTheCase">
                    <option value="1">ูุฏุนู</option>
                    <option value="2">ูุฏุนู ุนููู</option>
                </select>
            </div>
            <div class="field">
                <label for="estimatedTime">ุงูููุช ุงููุชููุน ููุฏุฑุงุณุฉ</label>
                <input type="date" formControlName="estimatedTime" />
                <div *ngIf="estimatedTime?.touched || showErrors" class="text-danger errors">
                    <p *ngIf="estimatedTime?.errors?.['required']">ูุฑุฌู ุชุญุฏูุฏ ุงูุชุงุฑูุฎ</p>
                    <p *ngIf="estimatedTime?.errors?.['min']">ุงุฏุฎู ููุช ูู ุงูุญุงุถุฑ ุงู ุงููุณุชูุจู</p>
                </div>
            </div>
            <div class="field">
                <label for="courtType">ููุน ุงููุญููุฉ</label>
                <select formControlName="courtType">
                    <option value="A8B6E3FB-6FB0-4F8F-CF6F-5A6B7C8D9E10">ุนุงูุฉ</option>
                    <option value="A8B6E3FB-6FB0-4F8F-CF6F-5A6B7C8D9E10">ุฌูุงุฆูุฉ</option>
                </select>
            </div>
            <div class="field">
                <label for="AssignedOfficer">ุงูููุธู ุงููููู ุนูู ุงููุถูุฉ</label>
                <select formControlName="AssignedOfficer">
                    <option value="C98AB58A-E86D-435E-BAC4-69ED1EC9617D">ุนุจุฏุงูุนุฒูุฒ</option>
                    <option value="C98AB58A-E86D-435E-BAC4-69ED1EC9617D">ุญุณู</option>
                </select>
            </div>
            <div class="field">
                <label for="caseNumber">ุฑูู ุงููุถูุฉ</label>
                <input type="text" formControlName="caseNumber" placeholder="ุฃุฏุฎู ุฑูู ุงููุถูุฉ" />
            </div>
            <div class="field lawyer-opnion">
                <label for="lawyerOpinion">ุฑุฃู ุงููุญุงูู</label>
                <textarea formControlName="lawyerOpinion" placeholder="ุฑุฃู ุงููุญุงูู"></textarea>
                <div class="text-danger errors" *ngIf="lawyerOpinion?.touched || showErrors">
                    <p *ngIf="lawyerOpinion?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="lawyerOpinion?.errors?.['minlength']">ูุฌุจ ุฃู ูุญุชูู ุนูู 10 ุฃุญุฑู ุนูู ุงูุฃูู</p>
                </div>
            </div>
        </div>
    </section>
    <section formGroupName="contract" class="section">
        <div class="section-chk">
            <label class="container">
                <input type="checkbox" formControlName="showContract">
                <svg viewBox="0 0 64 64" height="2em" width="2em">
                    <path
                        d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16"
                        pathLength="575.0541381835938" class="path"></path>
                </svg>
            </label>
            <h3 class="flex"> ุฅุถุงูุฉ ุนูุฏ ุ</h3>
        </div>
        <div *ngIf="showContract?.value" class="fields">
            <div class="field">
                <label for="contractType">ููุน ุงูุนูุฏ</label>
                <select formControlName="contractType">
                    <option value="1">ูุญุฏุฏ ุจูุฏุฉ</option>
                    <option value="2">ุบูุฑ ูุญุฏุฏ ุจูุฏุฉ</option>
                </select>
            </div>
            <div class="field">
                <label for="totalPrice">ุงูุณุนุฑ ุงูุงุฌูุงูู</label>
                <input type="number" min="0" formControlName="totalPrice" placeholder="ุงุฏุฎู ุงูุณุนุฑ" />
                <div *ngIf="totalPrice?.touched || showErrors" class="errors text-danger">
                    <p *ngIf="totalPrice?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="totalPrice?.errors?.['min']">ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃูุจุฑ ูู ุฃู ูุณุงูู ุตูุฑ</p>
                </div>
            </div>
            <div class="field" *ngIf="contractType?.value == 1">
                <label for="issueDate">ุชุงุฑูุฎ ุงูุจุฏุงูุฉ</label>
                <input type="date" formControlName="issueDate" />
                <div *ngIf="issueDate?.touched || showErrors" class="errors text-danger">
                    <p *ngIf="issueDate?.errors?.['required']">ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุทููุจ</p>
                </div>
            </div>
            <div class="field" *ngIf="contractType?.value == 1">
                <label for="expirationDate">ุชุงุฑูุฎ ุงูููุงูุฉ</label>
                <input type="date" formControlName="expirationDate" />
                <div *ngIf="expirationDate?.touched || showErrors" class="errors text-danger">
                    <p *ngIf="expirationDate?.errors?.['required']">ุชุงุฑูุฎ ุงูููุงูุฉ ูุทููุจ</p>
                </div>
            </div>
            <div class="field">
                <label for="downAmount">ุงูุนุฑุจูู</label>
                <input type="number" formControlName="downAmount" placeholder="ุงุฏุฎู ููุฏู ุงูุนูุฏ" min="0" />
                <!-- <p *ngIf="downAmount?.touched || showErrors && downAmount?.errors?.['max']" class="text-danger">ูุฌุจ ุงู ูููู ุงูุนุฑุจูู ุงูู ูู ุงู ูุณุงูู ุงูุณุนุฑ ุงูุงุฌูุงูู</p> -->
            </div>
            <div class="field">
                <label for="contractAttachment">ูุฑูู ุงูุนูุฏ</label>
                <input type="file" formControlName="contractAttachment" (change)="onFileSelected($event)" />
            </div>
            <div class="field">
                <p>
                    <label class="container">
                        <input type="checkbox" formControlName="assigned">
                        <svg viewBox="0 0 64 64" height="2em" width="2em">
                            <path
                                d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16"
                                pathLength="575.0541381835938" class="path"></path>
                        </svg>
                    </label>
                    ุชู ุชูููุน ุงูุนูุฏ ุ
                </p>
            </div>
        </div>
    </section>
    <section formGroupName="poa" class="section">
        <div class="section-chk">
            <label class="container">
                <input type="checkbox" formControlName="showPOA">
                <svg viewBox="0 0 64 64" height="2em" width="2em">
                    <path
                        d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16"
                        pathLength="575.0541381835938" class="path"></path>
                </svg>
            </label>
            <h3 class="flex"> ุฅุถุงูุฉ ููุงูุฉ ุ</h3>
        </div>
        <div *ngIf="showPOA?.value" class="fields">
            <div class="field">
                <label for="poaNumber">ุฃุฏุฎู ุฑูู ุงูููุงูุฉ</label>
                <input type="text" formControlName="poaNumber" placeholder="ุงุฏุฎู ุงูููุงูุฉ" />
                <div class="text-danger errors" *ngIf="poaNumber?.touched || showErrors">
                    <p *ngIf="poaNumber?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="poaNumber?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุงูุซุฑ ูู 3 ุงุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="poaIssueDate">ุชุงุฑูุฎ ุฅุตุฏุงุฑ ุงูููุงูุฉ</label>
                <input type="date" formControlName="poaIssueDate" />
                <div class="text-danger errors" *ngIf="poaIssueDate?.touched || showErrors">
                    <p *ngIf="poaIssueDate?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                </div>
            </div>
            <div class="field">
                <label for="poaAuthrizedBy">ุงูุฌูุฉ ุงููุตุฏุฑุฉ ููููุงูุฉ</label>
                <input type="text" formControlName="poaAuthrizedBy" placeholder="ุฃุฏุฎู ุงูุฌูุฉ ุงููุตุฏุฑุฉ ููููุงูุฉ" />
                <div class="text-danger errors" *ngIf="poaAuthrizedBy?.touched || showErrors">
                    <p *ngIf="poaAuthrizedBy?.errors?.['required']">ูุฐุง ุงูุญูู ูุทููุจ</p>
                    <p *ngIf="poaAuthrizedBy?.errors?.['minlength']">ูุฌุจ ุฃู ูููู ุงูุซุฑ ูู 3 ุงุญุฑู</p>
                </div>
            </div>
            <div class="field">
                <label for="poaAttachment">ูุฑูู ุงูููุงูุฉ</label>
                <input type="file" formControlName="poaAttachment" (change)="onFileSelected($event)" />
            </div>
        </div>
    </section>
    <div class="btns">
        <button type="submit" (click)="submit(false)" class="mybtn bg-main">ุฅุฑุณุงู ุงูููุงููุฉ</button>
        <button type="submit" (click)="submit(true)" class="mybtn bg-accent">ุญูุธ ููุณูุฏุฉ</button>
    </div>
</form>